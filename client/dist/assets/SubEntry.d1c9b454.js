import{n as s,A as l,a as n}from"./index.4f76038a.js";const o={components:{Applayout:l},name:"SubEntry",data:()=>({currency:[],currencyValue:[],currencyItem:{},currencyValueItem:{},entry:{entryDetail:[]},entryNumber:0,note:"",cridet:null,debit:null,is:!1,cridet1:null,debit1:null}),mounted(){this.getEntry(),this.getCurrencyValue(),this.getCurrency()},methods:{async getEntry(){const r=this.$route.params.entryId;console.log(r,"id"),await n.get(`/entry/${r}`).then(e=>{this.entry=e.data,this.entry.entryDetail&&(this.is=!0),console.log(this.entry,"aaaaa")}).catch(e=>{console.log(e)})},async getCurrency(){await n.get("/currency").then(r=>{this.currency=r.data,console.log("cu",this.currency)}).catch(r=>{console.log(r)})},async getCurrencyValue(){await n.get("/currency_value").then(r=>{this.currencyValue=r.data,console.log(this.currencyValue)})},async updateEntry(){const r=this.$route.params.entryId,e={entryNumber:this.entryNumber,note:this.note,currencyValue:this.currencyValue,currencyId:this.currencyId};await n.patch(`entry/${r}`,e).then(t=>{console.log(t.data,"aaaaa")}).catch(t=>{console.log(t)})},async createEntryDetail(){const r=this.$route.params.entryId,e={entryDetail:[{cridet:this.cridet,debit:this.debit},{cridet:this.cridet1,debit:this.debit1}]};console.log(e),await n.put(`entry/${r}`,e).then(t=>{console.log(t.data,"aaaaa");const a=this.$route.query.to||"/entry";this.$router.push(a)}).catch(t=>{console.log(t)})},async updateEntryDetail(){const r=this.$route.params.entryId,e={entryDetail:{cridet:this.cridet,debit:this.debit,currencyValue:this.currencyValueItem,currencyId:this.currencyItem}};await n.put(`entry/${r}`,e).then(t=>{console.log(t.data,"aaaaa")}).catch(t=>{console.log(t)})},async deleteEntry(){const r=this.$route.params.entryId;await n.delete(`entry/${r}`).then(e=>{console.log(e.data);const t=this.$route.query.to||"/entry";this.$router.push(t)}).catch(e=>{console.log(e)})},async deleteEntryDetail(){const r=this.$route.params.entryId;await n.delete(`/sub_entry/:entryId/${r}`).then(e=>{console.log(e.data);const t=this.$route.query.to||"//sub_entry/:entryId";this.$router.push(t)}).catch(e=>{console.log(e)})},checkSelected(){console.log(this.currencyValueItem)},checkSelected(){console.log(this.currencyItem)}}};var u=function(){var e=this,t=e._self._c;return t("applayout",[t("v-container",[t("v-card",{attrs:{width:"600",dense:"",shaped:""}},[t("v-card-title",{staticClass:"d-flex justify-center"},[e._v("\u0627\u0644\u062A\u0641\u0627\u0635\u064A\u0644")]),t("v-dialog",{attrs:{"max-width":"550px"},scopedSlots:e._u([{key:"activator",fn:function({on:a,attrs:c}){return[t("v-btn",e._g(e._b({staticClass:"mr-3 mb-3",attrs:{color:"green darken-1","v-if":!e.entry.entryDetail,dark:""}},"v-btn",c,!1),a),[e._v(" \u0625\u0636\u0627\u0641\u0629 \u062C\u062F\u064A\u062F "),t("v-icon",[e._v("mdi-plus")])],1)]}}]),model:{value:e.dialog,callback:function(a){e.dialog=a},expression:"dialog"}},[t("v-card",{attrs:{dense:"",shaped:""}},[t("v-card-title",{staticClass:"d-flex justify-center"},[e._v("\u0625\u0636\u0627\u0641\u0629 \u062C\u062F\u064A\u062F")]),t("v-card-text",{attrs:{dir:"ltr"}},[t("v-container",[t("v-form",{staticClass:"px-4"},[t("h2",{attrs:{dir:"rtl"}},[e._v("\u0627\u0644\u062F\u0627\u0626\u0646")]),t("v-autocomplete",{attrs:{type:"number",label:"\u0642\u064A\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0629",items:e.currencyValue,"item-text":"value","item-value":"_id",rules:[()=>!!e.currencyvalue||"\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628"],"error-messages":e.errorMessages,outlined:"",color:"blue-grey darken-3",reverse:"",dense:"",shaped:""},on:{change:e.checkSelected},model:{value:e.currencyValueItem,callback:function(a){e.currencyValueItem=a},expression:"currencyValueItem"}}),t("v-autocomplete",{attrs:{type:"number",label:" \u0627\u0644\u0639\u0645\u0644\u0629",items:e.currency,"item-text":"name","item-value":"_id",rules:[()=>!!e.currencyItem||"\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628"],"error-messages":e.errorMessages,outlined:"",color:"blue-grey darken-3",reverse:"",dense:"",shaped:""},on:{change:e.checkSelected},model:{value:e.currencyItem,callback:function(a){e.currencyItem=a},expression:"currencyItem"}}),t("h2",{attrs:{dir:"rtl"}},[e._v("\u0627\u0644\u0645\u062F\u064A\u0646")]),t("v-autocomplete",{attrs:{type:"number",label:"\u0642\u064A\u0645\u0629 \u0627\u0644\u0639\u0645\u0644\u0629",items:e.currencyValue,"item-text":"value","item-value":"_id",rules:[()=>!!e.currencyvalue||"\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628"],"error-messages":e.errorMessages,outlined:"",color:"blue-grey darken-3",reverse:"",dense:"",shaped:""},on:{change:e.checkSelected},model:{value:e.currencyValueItem,callback:function(a){e.currencyValueItem=a},expression:"currencyValueItem"}}),t("v-autocomplete",{attrs:{type:"number",label:" \u0627\u0644\u0639\u0645\u0644\u0629",items:e.currency,"item-text":"name","item-value":"_id",rules:[()=>!!e.currencyItem||"\u0647\u0630\u0627 \u0627\u0644\u062D\u0642\u0644 \u0645\u0637\u0644\u0648\u0628"],"error-messages":e.errorMessages,outlined:"",color:"blue-grey darken-3",reverse:"",dense:"",shaped:""},on:{change:e.checkSelected},model:{value:e.currencyItem,callback:function(a){e.currencyItem=a},expression:"currencyItem"}}),t("div",{staticClass:"text-center mt-8"},[t("v-btn",{staticClass:"mt-3 text-h6",attrs:{color:"green darken-1",type:"submit",dark:""},on:{click:e.createEntryDetail}},[e._v("\u0627\u0644\u062A\u0627\u0644\u064A")])],1)],1)],1)],1)],1)],1),t("v-container",[t("v-simple-table",{scopedSlots:e._u([{key:"default",fn:function(){return[t("thead",[t("tr",[t("th",[e._v("\u0627\u0644\u062F\u0627\u0626\u0646")]),t("th",[e._v("\u0627\u0644\u0645\u062F\u064A\u0646")])])]),t("tbody",e._l(e.entry.entryDetail,function(a){return t("tr",{key:a.name},[t("td",[e._v(e._s(a.cridet))]),t("td",[e._v(e._s(a.debit))]),t("td",[e._v(e._s(a.currencyId))]),t("td",[e._v(e._s(a.currencyValue))])])}),0)]},proxy:!0}])})],1)],1)],1)],1)},i=[],d=s(o,u,i,!1,null,null,null,null);const h=d.exports;export{h as default};
